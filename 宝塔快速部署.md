# ğŸš€ å®å¡”é¢æ¿å¿«é€Ÿéƒ¨ç½²ï¼ˆ5åˆ†é’Ÿï¼‰

## ä¸€ã€å‡†å¤‡å·¥ä½œ

### 1. ç¡®è®¤ Docker å·²å®‰è£…

å®å¡”é¢æ¿è‡ªå¸¦ Dockerï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚

åœ¨å®å¡” **ç»ˆç«¯** éªŒè¯ï¼š

```bash
docker --version
docker-compose --version
```

å¦‚æœ `docker-compose` å‘½ä»¤ä¸å­˜åœ¨ï¼Œæ‰§è¡Œï¼š

```bash
# å®‰è£… Docker Composeï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
docker-compose --version
```

## äºŒã€ä¸Šä¼ é¡¹ç›®

### æ–¹å¼1ï¼šä½¿ç”¨ Gitï¼ˆæ¨èï¼‰

```bash
cd /www/wwwroot/
git clone https://github.com/ä½ çš„ç”¨æˆ·å/nexus-agent-orchestrator.git nexus-agent
cd nexus-agent
```

### æ–¹å¼2ï¼šä¸Šä¼ å‹ç¼©åŒ…

1. åœ¨æœ¬åœ°æ‰“åŒ…é¡¹ç›®ï¼š`zip -r nexus-agent.zip .`
2. åœ¨å®å¡” **æ–‡ä»¶ç®¡ç†** ä¸­ä¸Šä¼ åˆ° `/www/wwwroot/`
3. è§£å‹å¹¶é‡å‘½åä¸º `nexus-agent`

## ä¸‰ã€é…ç½®ç¯å¢ƒå˜é‡

```bash
cd /www/wwwroot/nexus-agent

# å¤åˆ¶ç¤ºä¾‹æ–‡ä»¶
cp env.prod.example .env.prod

# ç¼–è¾‘é…ç½®
nano .env.prod
```

**å¿…é¡»ä¿®æ”¹çš„é…ç½®**ï¼š

```env
# æ•°æ®åº“å¯†ç ï¼ˆä½¿ç”¨å¼ºå¯†ç ï¼ï¼‰
POSTGRES_PASSWORD=ä½ çš„å¼ºå¯†ç _è‡³å°‘16ä½

# JWTå¯†é’¥ï¼ˆç”Ÿæˆéšæœºå­—ç¬¦ä¸²ï¼‰
JWT_SECRET=$(openssl rand -base64 32)

# Gemini APIå¯†é’¥
GEMINI_API_KEY=ä½ çš„Gemini APIå¯†é’¥

# ä½ çš„åŸŸå
VITE_API_URL=http://ä½ çš„åŸŸå/api
CORS_ORIGIN=http://ä½ çš„åŸŸå
```

## å››ã€ä¸€é”®å®‰è£…ï¼ˆæ¨èï¼‰

### æ–¹å¼1ï¼šç›´æ¥è¿è¡Œï¼ˆæœ€ç®€å•ï¼‰

```bash
# ä» GitHub ç›´æ¥è¿è¡Œï¼ˆéœ€è¦å…ˆä¸Šä¼  install.sh åˆ°ä»“åº“ï¼‰
bash <(curl -fsSL https://raw.githubusercontent.com/ä½ çš„ç”¨æˆ·å/nexus-agent-orchestrator/main/install.sh)
```

### æ–¹å¼2ï¼šæœ¬åœ°è¿è¡Œ

```bash
cd /www/wwwroot/nexus-agent

# ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
chmod +x install.sh

# è¿è¡Œä¸€é”®å®‰è£…è„šæœ¬
./install.sh
```

å®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… æ£€æµ‹ç¯å¢ƒ
- âœ… ç”Ÿæˆé…ç½®
- âœ… æ„å»ºé•œåƒ
- âœ… å¯åŠ¨æœåŠ¡
- âœ… è¿è¡Œè¿ç§»

### æ–¹å¼3ï¼šä½¿ç”¨éƒ¨ç½²è„šæœ¬

```bash
cd /www/wwwroot/nexus-agent
chmod +x deploy.sh
./deploy.sh
```

æˆ–è€…æ‰‹åŠ¨æ‰§è¡Œï¼š

```bash
# æ„å»ºå¹¶å¯åŠ¨
docker-compose -f docker-compose.prod.yml --env-file .env.prod up -d --build

# ç­‰å¾…10ç§’åè¿è¡Œæ•°æ®åº“è¿ç§»
sleep 10
docker-compose -f docker-compose.prod.yml exec backend npm run migrate
```

## äº”ã€é…ç½®å®å¡”åå‘ä»£ç†

### 1. åˆ›å»ºç½‘ç«™

1. å®å¡” **ç½‘ç«™** â†’ **æ·»åŠ ç«™ç‚¹**
2. è¾“å…¥åŸŸåï¼š`nexus.yourdomain.com`
3. é€‰æ‹© **çº¯é™æ€**

### 2. è®¾ç½®åå‘ä»£ç†

1. ç‚¹å‡»ç½‘ç«™ **è®¾ç½®** â†’ **åå‘ä»£ç†**
2. **æ·»åŠ åå‘ä»£ç†**ï¼š
   - ä»£ç†åç§°ï¼š`nexus`
   - ç›®æ ‡URLï¼š`http://127.0.0.1:80`
   - å‘é€åŸŸåï¼š`$host`
3. **ä¿å­˜**

### 3. é…ç½® SSL

1. **SSL** â†’ **Let's Encrypt** â†’ **ç”³è¯·**
2. å¼€å¯ **å¼ºåˆ¶ HTTPS**

## å…­ã€éªŒè¯éƒ¨ç½²

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose -f docker-compose.prod.yml ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose.prod.yml logs -f
```

è®¿é—®ä½ çš„åŸŸåï¼Œåº”è¯¥èƒ½çœ‹åˆ°ç™»å½•é¡µé¢ï¼

## ğŸ“ å¸¸ç”¨å‘½ä»¤

```bash
cd /www/wwwroot/nexus-agent

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f docker-compose.prod.yml logs -f

# é‡å¯æœåŠ¡
docker-compose -f docker-compose.prod.yml restart

# åœæ­¢æœåŠ¡
docker-compose -f docker-compose.prod.yml stop

# å¯åŠ¨æœåŠ¡
docker-compose -f docker-compose.prod.yml start

# æ›´æ–°ä»£ç 
git pull
docker-compose -f docker-compose.prod.yml --env-file .env.prod up -d --build
```

## ğŸ› å¸¸è§é—®é¢˜

### ç«¯å£è¢«å ç”¨

ä¿®æ”¹ `.env.prod` ä¸­çš„ç«¯å£å·ï¼Œæˆ–åœæ­¢å ç”¨ç«¯å£çš„æœåŠ¡ã€‚

### æ•°æ®åº“è¿æ¥å¤±è´¥

æ£€æŸ¥ `.env.prod` ä¸­çš„æ•°æ®åº“é…ç½®æ˜¯å¦æ­£ç¡®ã€‚

### 502 é”™è¯¯

æ£€æŸ¥åç«¯æ˜¯å¦æ­£å¸¸è¿è¡Œï¼š
```bash
docker-compose -f docker-compose.prod.yml ps backend
docker-compose -f docker-compose.prod.yml logs backend
```

## âœ… å®Œæˆï¼

ç°åœ¨ä½ å¯ä»¥é€šè¿‡åŸŸåè®¿é—®ç³»ç»Ÿäº†ï¼

