# 🚀 所有部署方式汇总

本文档汇总了 Nexus Agent Orchestrator 的所有部署方式，选择最适合你的方案。

## 📋 快速选择指南

| 场景 | 推荐方案 | 难度 | 时间 |
|------|---------|------|------|
| **完全新手** | Railway 一键部署 | ⭐ | 5分钟 |
| **有宝塔面板** | 宝塔 Docker 部署 | ⭐⭐ | 10分钟 |
| **有 VPS 服务器** | 一键远程部署脚本 | ⭐⭐ | 5分钟 |
| **不想用 Docker** | PM2 直接部署 | ⭐⭐⭐ | 15分钟 |
| **预算有限** | Vercel + Railway | ⭐⭐ | 10分钟 |
| **需要全球加速** | Fly.io | ⭐⭐⭐ | 15分钟 |

---

## 🎯 方案一：云平台一键部署（最简单）

### 1.1 Railway（推荐新手）

**优点**：
- ✅ 最简单，零配置
- ✅ 自动部署数据库
- ✅ 自动 HTTPS
- ✅ 支持 GitHub 自动部署

**步骤**：
1. 访问 https://railway.app
2. 连接 GitHub 仓库
3. 添加 PostgreSQL 数据库
4. 部署后端和前端
5. 配置环境变量

**详细文档**：`云平台一键部署.md`

**时间**：5-10 分钟

---

### 1.2 Vercel + Railway（推荐预算有限）

**优点**：
- ✅ 前端完全免费
- ✅ CDN 全球加速
- ✅ 自动 HTTPS
- ✅ 零配置

**步骤**：
1. 前端部署到 Vercel（免费）
2. 后端部署到 Railway
3. 配置环境变量

**详细文档**：`云平台一键部署.md`

**时间**：10 分钟

---

## 🎯 方案二：宝塔面板部署（推荐国内用户）

### 2.1 一键安装脚本

**优点**：
- ✅ 自动化程度高
- ✅ 自动生成配置
- ✅ 适合宝塔用户

**步骤**：
```bash
cd /www/wwwroot/nexus-agent
chmod +x install.sh
./install.sh
```

**详细文档**：`宝塔Docker部署完整指南.md`

**时间**：10-15 分钟

---

### 2.2 一键远程部署（最快速）

**优点**：
- ✅ 从 GitHub 直接拉取
- ✅ 自动安装依赖
- ✅ 自动部署

**步骤**：
```bash
# 下载并运行
curl -fsSL https://raw.githubusercontent.com/你的用户名/nexus-agent-orchestrator/main/一键远程部署.sh | bash

# 或本地运行
chmod +x 一键远程部署.sh
./一键远程部署.sh
```

**详细文档**：`一键远程部署.sh`

**时间**：5 分钟

---

## 🎯 方案三：PM2 直接部署（不用 Docker）

**优点**：
- ✅ 启动快
- ✅ 资源占用少
- ✅ 调试方便
- ✅ 不需要 Docker

**步骤**：
```bash
# 安装 PM2
npm install -g pm2

# 安装依赖
npm install
cd backend && npm install && cd ..

# 构建前端
npm run build

# 启动服务
cd backend
pm2 start npm --name "nexus-backend" -- run start
cd ..
pm2 serve dist 80 --name "nexus-frontend" --spa
```

**详细文档**：`PM2部署方案.md`

**时间**：15 分钟

---

## 🎯 方案四：Docker Compose 手动部署

**优点**：
- ✅ 环境隔离
- ✅ 易于管理
- ✅ 适合生产环境

**步骤**：
```bash
# 配置环境变量
cp env.prod.example .env.prod
nano .env.prod

# 构建和启动
docker-compose -f docker-compose.prod.yml --env-file .env.prod up -d --build

# 运行迁移
docker-compose -f docker-compose.prod.yml exec -T backend npm run migrate
```

**详细文档**：`宝塔Docker部署完整指南.md`

**时间**：15-20 分钟

---

## 📊 方案对比表

| 方案 | 难度 | 时间 | 成本 | 适用场景 |
|------|------|------|------|---------|
| **Railway** | ⭐ | 5分钟 | $5/月免费额度 | 新手、快速部署 |
| **Vercel+Railway** | ⭐⭐ | 10分钟 | 前端免费 | 预算有限 |
| **宝塔一键** | ⭐⭐ | 10分钟 | 服务器费用 | 有宝塔面板 |
| **远程脚本** | ⭐⭐ | 5分钟 | 服务器费用 | 有 VPS |
| **PM2** | ⭐⭐⭐ | 15分钟 | 服务器费用 | 不用 Docker |
| **Docker手动** | ⭐⭐⭐ | 20分钟 | 服务器费用 | 生产环境 |

---

## 🚀 最快部署方式（推荐）

### 方式1：一键远程部署（5分钟）

```bash
# 在服务器上执行
curl -fsSL https://raw.githubusercontent.com/你的用户名/nexus-agent-orchestrator/main/一键远程部署.sh | bash
```

**需要**：
- VPS 服务器
- Docker 环境（脚本会自动安装）

---

### 方式2：Railway 一键部署（5分钟）

1. 访问 https://railway.app
2. 连接 GitHub 仓库
3. 添加 PostgreSQL
4. 部署后端和前端
5. 配置环境变量

**需要**：
- GitHub 账号
- Railway 账号

---

## 📝 部署前准备

所有方案都需要：

1. **Gemini API 密钥**
   - 访问 https://makersuite.google.com/app/apikey
   - 创建 API 密钥

2. **域名**（可选但推荐）
   - 用于 HTTPS
   - 用于 CORS 配置

3. **环境变量配置**
   ```env
   # 必须配置
   GEMINI_API_KEY=你的API密钥
   JWT_SECRET=至少32位随机字符串
   POSTGRES_PASSWORD=强密码
   
   # 推荐配置
   VITE_API_URL=https://你的域名/api
   CORS_ORIGIN=https://你的域名
   ```

---

## 🔧 部署后配置

### 1. 配置反向代理（如果使用宝塔）

- 目标URL：`http://127.0.0.1:80`
- 发送域名：`$host`

### 2. 配置 SSL 证书

- 使用 Let's Encrypt 免费证书
- 开启强制 HTTPS

### 3. 验证部署

```bash
# 检查服务状态
docker-compose -f docker-compose.prod.yml ps  # Docker
pm2 status  # PM2

# 测试访问
curl http://localhost/api/health
```

---

## 📚 详细文档索引

- **宝塔部署**：`宝塔Docker部署完整指南.md`
- **快速参考**：`宝塔部署快速参考.md`
- **云平台部署**：`云平台一键部署.md`
- **PM2部署**：`PM2部署方案.md`
- **环境检查**：`./check-bt-deploy.sh`

---

## 🎉 选择建议

- **完全新手** → Railway
- **有宝塔面板** → 宝塔一键部署
- **有 VPS** → 一键远程部署脚本
- **不想用 Docker** → PM2 部署
- **预算有限** → Vercel + Railway
- **生产环境** → Docker Compose

---

## 🆘 需要帮助？

1. 查看对应方案的详细文档
2. 运行环境检查脚本：`./check-bt-deploy.sh`
3. 查看日志排查问题
4. 参考故障排除章节

---

**选择最适合你的方案，开始部署吧！** 🚀

